import{E as N,H as W,K as R,P as d,W as G,X as O,a as T,ba as J,c as A,da as m,ea as y,f as z,gb as x,h as B,hb as k,ib as w,m as v,vb as K,x as H,za as U}from"./chunk-IUQBPAPP.js";import{a as h}from"./chunk-4CLCTAJ7.js";function S(e){e||(O(S),e=d(y));let t=new A(n=>e.onDestroy(n.next.bind(n)));return n=>n.pipe(W(t))}function M(e,t){!t?.injector&&O(M);let n=t?.injector??d(m),r=new B(1),o=w(()=>{let p;try{p=e()}catch(a){k(()=>r.error(a));return}k(()=>r.next(p))},{injector:n,manualCleanup:!0});return n.get(y).onDestroy(()=>{o.destroy(),r.complete()}),r.asObservable()}function $(e,t,n){!t&&O(e);let r=t??d(m);return n?G(r,n):r}function j(e,...t){let[n,r,o,p,a]=Z(t);if(n){let u=null;return o instanceof y?u=o:u=$(j,o).get(y),n.pipe(S(u)).subscribe(s=>{let l=()=>{e.update(i=>{if(!P(i))return r?.(i,s)||s;if(!P(s)){let I=r?r(i,s):s;return P(I)?h(h({},i),I):I}return h(h({},i),r?.(i,s)||s)})};p?k(l):l()})}if(a){let u=o instanceof m?$(j,o):void 0;return w(()=>{e.update(s=>P(s)?h(h({},s),a()):a())},{allowSignalWrites:!0,injector:u})}return{with(...u){if(!this.subscription)this.subscription=new T;else if(this.subscription.closed)return console.info("[ngxtension connect] ConnectedSignal has been closed."),this;return this.subscription.add(j(e,...u,o,p)),this},subscription:null}}function Z(e){return e.length>3?[e[0],e[1],e[2],e[3],null]:e.length===3?typeof e[2]=="boolean"?v(e[0])?[e[0],null,e[1],e[2],null]:[null,null,e[1],e[2],e[0]]:[e[0],e[1],e[2],!1,null]:e.length===2?typeof e[1]=="boolean"?[null,null,e[0],e[1],null]:typeof e[1]=="function"?[e[0],e[1],null,!1,null]:[e[0],null,e[1],!1,null]:v(e[0])?[e[0],null,null,!1,null]:typeof e[0]=="function"?[null,null,null,!1,e[0]]:[null,null,e[0],!1,null]}function P(e){return typeof e=="object"&&e!==void 0&&e!==null&&!Array.isArray(e)}function Ie(e){let t=d(y),n=d(m),{initialState:r,sources:o=[],lazySources:p=[],actionSources:a={},selectors:u=()=>({}),effects:s=()=>({})}=e,l=U(r),i=l.asReadonly(),I=M(l),F=!1,C=[],D=i;Q(l,o);for(let[c,f]of Object.entries(a))if(v(f))V(i,I,c,t,f,C);else{let b=new z,L=f(i,b).pipe(N());j(l,L),V(i,I,c,t,b,C,L)}for(let c in r)Object.defineProperty(i,c,{value:x(()=>i()[c])});for(let[c,f]of Object.entries(u(D)))Object.defineProperty(i,c,{value:x(f)});for(let[c,f]of Object.entries(s(D)))console.warn("The 'effects' configuration in signalSlice is deprecated. Please use standard signal effects outside of signalSlice instead."),Object.defineProperty(D,c,{value:w(b=>{let q=f();q&&b(()=>q())})});t.onDestroy(()=>{C.forEach(c=>c.complete())});let E=()=>{F||(F=!0,Q(l,p,n,!0))};return new Proxy(D,{get(c,f,b){return E(),Reflect.get(c,f,b)},apply(c,f,b){return E(),Reflect.apply(c,f,b)}})}function Q(e,t,n,r=!1){for(let o of t)v(o)?j(e,o,n,r):j(e,o(e.asReadonly()),n,r)}function V(e,t,n,r,o,p,a){Object.defineProperties(e,{[n]:{value:u=>v(u)?new Promise((s,l)=>{u.pipe(S(r)).subscribe({next:i=>{o.next(i)},error:i=>{o.error(i),l(i)},complete:()=>{o.complete(),s(e())}})}):(a&&a.pipe(S(r)).subscribe(),new Promise(s=>{t.pipe(H(1)).subscribe(l=>{s(l)}),o.next(u)}))},[`${n}$`]:{value:o.asObservable()}}),p.push(o)}var X={API_URL:"https://fakestoreapi.com"};var g=class e{http=d(K);apiUrl=X.API_URL;static \u0275fac=function(n){return new(n||e)};static \u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"})};var ee=5,Y=class e extends g{getProducts(t){return this.http.get(`${this.apiUrl}/products`,{params:{limit:t*ee}})}getProduct(t){return this.http.get(`${this.apiUrl}/products/${t}`)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=J(e)))(r||e)}})();static \u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"})};export{Ie as a,Y as b};
